#!/usr/bin/env bash

case "$1" in
    build)
        ln -sf /Users/zvyagin/Projects/az/dto-code-generator/examples/mcsdk/output/dto/mcsdk.ts /Users/zvyagin/Projects/az/dto-code-generator/examples/mcsdk/output/test/typescript/dto.ts
        ln -sf /Users/zvyagin/Projects/az/dto-code-generator/examples/mcsdk/output/test/mcsdk_test.ts /Users/zvyagin/Projects/az/dto-code-generator/examples/mcsdk/output/test/typescript/dto_tests.ts
        npm install typescript
        npm install --save-dev @types/node
        ./node_modules/typescript/bin/tsc --lib es2022 dto_tests.ts
        ;;
    *)
        node dto_tests.js $@
        ;;
esac
